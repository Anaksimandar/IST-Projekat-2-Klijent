<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <div class="container">
        <header>
            <nav class="navbar navbar-expand-lg bg-light">
                <div class="container-fluid">
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Pocetna</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="prikazPreduzeca.html">Preduzece</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="prikazFaktura.html">Faktura</a>
                        </li>
                      
                    </ul>
                  </div>
                </div>
              </nav>
        </header>
        <main>
            <div class="container-fluid my-4">
                <form id="formaDodajPreduzece">
                    <div class="row">
                        <div class="col">
                            <input type="text" id="naziv" name="naziv" class="form-control" required placeholder="Naziv preduzeca">
                            <div hidden id="preduzeceAlert" class="alert alert-danger">Naziv preduzeca ne sme sadrzati brojeve i mora imati minimalno 3 karaktera</div>
                        </div>
                        <div class="col">
                            <input type="number" id="pib" min="0" max="999999999"  name="pib" required class="form-control" placeholder="Unesite PIB">
                            <div hidden id="pibAlert" class="alert alert-danger">PIB mora da sadrzi 9 cifara</div>
                        </div>
                    </div>
                    <div class="row my-4">
                        <div class="col">
                            <input type="text" id="ime"  name="ime" required class="form-control" placeholder="Ime odgovornog lica">
                            <div hidden class="alert alert-danger" id="imeAlert">Ime ne sme sadrzati brojeve i mora imati minimalno 3 karaktera</div>
                        </div>
                        <div class="col">
                            <input type="text" id="prezime" name="prezime" required class="form-control" placeholder="Prezime odgovornog lica">
                            <div hidden class="alert alert-danger" id="prezimeAlert">Prezime ne sme sadrzati brojeve i mora imati minimalno 3 karaktera</div>

                        </div>
                    </div>
                    <div class="row my-4">
                        <div class="col">
                            <input type="text" value="+381"  id="telefon" required name="telefon" class="form-control" placeholder="Telefon">
                            <div hidden class="alert alert-danger" id="telefonAlert">Broj telefona mora da pocinje sa +381 i sadrzi 9 cifara</div>

                        </div>
                        <div class="col">
                            <input type="mail" id="mejl" required  name="mejl" class="form-control" placeholder="Mejl">
                            <div hidden class="alert alert-danger" id="mailAlert">Neispravan format</div>
                        </div>
                    </div>
                    <div class="row my-4">
                        <h5>Adresa:</h5>
                        <div class="col">
                            <input type="text" id="ulica" required name="ulica" class="form-control" placeholder="Ulica">
                            <div hidden class="alert alert-danger" id="ulicaAlert">Ulica mora da sadrzi bar 3 karaktera</div>
                        </div>
                        <div class="col">
                            <input type="tel" id="broj" required name="broj" class="form-control" placeholder="Broj">
                            <div hidden class="alert alert-danger" id="brojAlert">Broj ulice ne moze da sadrzi karaktere</div>

                        </div>
                        <div class="col">
                            <button id="dodajPreduzece" class="btn btn-success">Dodaj preduzece</button>
                            <a href="dodavanjePreduzeca.html" class="btn btn-danger">Ponisti</a>
                        </div>
                    </div>
                </form>
                <div hidden class="alert alert-success"></div>
                <div hidden id="proveraForme" class="alert alert-danger"></div>
            </div>
                
                
        </main>
    </div>
</body>
</html>
<script  src="./klijent.js"></script>
<script>
        var proveraPIB = false; var proveraIme = false;
        var proveraPrezime = false;
        var proveraNaziv = false;
        var proveraUlica = false;
        var proveraBroj = false;
        var proveraMejl = false;
        var proveraTelefon = false;

        // provera pib
        $("#pib").keyup(() => {
            if ($("#pib").val().length != 9) {
                $("#pibAlert").attr("hidden", false);   
                proveraPIB = false;
            }
            else {
                $("#pibAlert").attr("hidden", true);
                proveraPIB = true;
            }
        })

        // provera preduzeca
        $("#naziv").keyup(() => {
            var inputValue = $("#naziv").val();
            if (inputValue.length < 3 || /\d/.test(inputValue)) {
                $("#preduzeceAlert").attr("hidden", false);
                proveraNaziv = false;

            }
            else {
                $("#preduzeceAlert").attr("hidden", true);
                proveraNaziv = true;
            }
        })

        // provera imena
        $("#ime").keyup(() => {
            var inputValue = $("#ime").val();
            if (inputValue.length < 3 || /\d/.test(inputValue)) {
                $("#imeAlert").attr("hidden", false);
                proveraIme = false;
            }
            else {
                $("#imeAlert").attr("hidden", true);
                proveraIme = true;
            }
        })

        // provera imena
        $("#prezime").keyup(() => {
            var inputValue = $("#prezime").val();
            if (inputValue.length < 3 || /\d/.test(inputValue)) {
                $("#prezimeAlert").attr("hidden", false);
                proveraPrezime = false;
            }
            else {
                $("#prezimeAlert").attr("hidden", true);
                proveraPrezime = true;

            }
        })

        // provera telefona
        $("#telefon").keyup(() => {
            var inputValue = $("#telefon").val();
            if (/^\+381\d{9}$/.test(inputValue) == false) {
                $("#telefonAlert").attr("hidden", false);
                proveraTelefon = false;
            }
            else {
                $("#telefonAlert").attr("hidden", true);
                proveraTelefon = true;
            }
        })

        // provera mejla
        $("#mejl").keyup(() => {
            var emailValue = $("#mejl").val();
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(emailValue) == false) {
                $("#mailAlert").attr("hidden", false);
                proveraMejl = false;
            }
            else {
                $("#mailAlert").attr("hidden", true);
                proveraMejl = true;

            }
        })

        // provera ulice
        $("#ulica").keyup(() => {
            var inputValue = $("#ulica").val();
            if (inputValue.length < 3) {
                $("#ulicaAlert").attr("hidden", false);
                proveraUlica = false;
                
            }
            else {
                $("#ulicaAlert").attr("hidden", true);
                proveraUlica = true;
            }
        })

        // provera broja ulice
        $("#broj").keyup(() => {
            var inputValue = $("#broj").val();
            if (/\d/.test(inputValue) == false) {
                $("#brojAlert").attr("hidden", false);
                proveraBroj = false;
                
            }
            else {
                $("#brojAlert").attr("hidden", true);
                proveraBroj = true;
            }
        })

    
    $("#dodajPreduzece").click((e)=>{
        e.preventDefault();
        let naziv = document.querySelector("#naziv").value;
        let pib = document.querySelector("#pib").value;
        let ime = document.querySelector("#ime").value;
        let prezime = document.querySelector("#prezime").value;
        let ulica = document.querySelector("#ulica").value;
        let broj = document.querySelector("#broj").value;
        let mejl = document.querySelector("#mejl").value;
        let telefon = document.querySelector("#telefon").value;

        
        if(proveraPIB && proveraIme && proveraPrezime && proveraNaziv && proveraTelefon && proveraMejl && proveraUlica && proveraBroj){
            radSaPreduzecima.dodajPreduzece(naziv, pib, ime, prezime, ulica, broj, mejl, telefon);
            alert('Preduzece je uspesno sacuvano');
        }
        else{
            $("#proveraForme").attr("hidden",false);
            $("#proveraForme").text("Proverite podatke");
        }

        
    })


  


</script>